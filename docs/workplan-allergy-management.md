# Allergy Management Implementation Workplan

## Overview

Implement admin-managed allergy types and household-scoped allergy assignments following existing ADR patterns.

**Key Decisions:**
- CASCADE delete: Deleting AllergyType removes all related Allergy records
- Admin: Manage global AllergyType catalog, view all inhabitants per type (lightweight)
- Users: Manage allergies for their household inhabitants only
- Fetching: Group allergies by inhabitant
- Icons: Emoji strings or icon class names (e.g., "ðŸ¥œ" or "i-heroicons-exclamation-triangle")
- **Admin UX**: Master-detail pattern with NuxtUI Cards
- **Household UX**: Busy-parent approach with NuxtUI Cards

---

## UX Design - ASCII Mockups (NuxtUI Card Layout)

### Admin Allergy Type Management (/admin/allergies)

**Master-Detail Pattern - Desktop View:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ALLERGI-TYPER            â”‚ ALLERGI-TYPE DETALJER                                â”‚
â”‚                          â”‚                                                      â”‚
â”‚ [+ Ny] [ðŸ“„ KÃ¸kken-PDF]   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                          â”‚ â”‚ ðŸ¥œ Peanuts (JordnÃ¸dder)                        â”‚   â”‚
â”‚ â„¹ï¸ Allergi-ansvarlige:   â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ ðŸ‘¤ Anna Hansen           â”‚ â”‚                                                â”‚   â”‚
â”‚ ðŸ‘¤ Bob Jensen            â”‚ â”‚ Alvorlig allergi mod jordnÃ¸dder. Kan          â”‚   â”‚
â”‚                          â”‚ â”‚ forÃ¥rsage anafylaktisk shock. Streng          â”‚   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ undgÃ¥else nÃ¸dvendig.                           â”‚   â”‚
â”‚ â”‚ðŸ¥œ Peanuts      [â€¢]â”‚   â”‚ â”‚                                                â”‚   â”‚
â”‚ â”‚ðŸŒ¾ Gluten       [ ]â”‚   â”‚ â”‚ BEBOERE MED DENNE ALLERGI (3)                 â”‚   â”‚
â”‚ â”‚ðŸ¥› Laktose      [ ]â”‚   â”‚ â”‚                                                â”‚   â”‚
â”‚ â”‚ðŸ¥š Ã†g           [ ]â”‚   â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚ðŸŒ° NÃ¸dder       [ ]â”‚   â”‚ â”‚ â”‚ðŸ‘¤ Anna Hansen                            â”‚ â”‚   â”‚
â”‚ â”‚ðŸŸ Skaldyr      [ ]â”‚   â”‚ â”‚ â”‚   ðŸ  SkrÃ¥ningen 31                       â”‚ â”‚   â”‚
â”‚ â”‚ðŸ… Tomater      [ ]â”‚   â”‚ â”‚ â”‚   ðŸ’¬ "Meget alvorlig - har EpiPen"       â”‚ â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚                          â”‚ â”‚                                                â”‚   â”‚
â”‚ 7 allergi-typer          â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚                          â”‚ â”‚ â”‚ðŸ‘¤ Bob Jensen                             â”‚ â”‚   â”‚
â”‚                          â”‚ â”‚ â”‚   ðŸ  Abbey Road 1                        â”‚ â”‚   â”‚
â”‚                          â”‚ â”‚ â”‚   ðŸ’¬ "Mild reaktion"                     â”‚ â”‚   â”‚
â”‚                          â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚                          â”‚ â”‚                                                â”‚   â”‚
â”‚                          â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚                          â”‚ â”‚ â”‚ðŸ‘¶ Clara Nielsen                          â”‚ â”‚   â”‚
â”‚                          â”‚ â”‚ â”‚   ðŸ  TvethÃ¸jvej 43, 1                    â”‚ â”‚   â”‚
â”‚                          â”‚ â”‚ â”‚   ðŸ’¬ Ingen kommentar                     â”‚ â”‚   â”‚
â”‚                          â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚                          â”‚ â”‚                                                â”‚   â”‚
â”‚                          â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚                          â”‚ â”‚               [Rediger]  [Slet allergi-type]  â”‚   â”‚
â”‚                          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Master-Detail Pattern - Create Mode:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ALLERGI-TYPER            â”‚ OPRET NY ALLERGI-TYPE                                â”‚
â”‚                          â”‚                                                      â”‚
â”‚ [+ Ny] [ðŸ“„ KÃ¸kken-PDF]   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                          â”‚ â”‚ Ny allergi-type                                â”‚   â”‚
â”‚ â„¹ï¸ Allergi-ansvarlige:   â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ ðŸ‘¤ Anna Hansen           â”‚ â”‚                                                â”‚   â”‚
â”‚ ðŸ‘¤ Bob Jensen            â”‚ â”‚ Navn *                                         â”‚   â”‚
â”‚                          â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚Peanuts                                 â”‚   â”‚   â”‚
â”‚ â”‚ðŸ¥œ Peanuts      [ ]â”‚   â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚ â”‚ðŸŒ¾ Gluten       [ ]â”‚   â”‚ â”‚                                                â”‚   â”‚
â”‚ â”‚ðŸ¥› Laktose      [ ]â”‚   â”‚ â”‚ Beskrivelse *                                  â”‚   â”‚
â”‚ â”‚ðŸ¥š Ã†g           [ ]â”‚   â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚ â”‚ðŸŒ° NÃ¸dder       [ ]â”‚   â”‚ â”‚ â”‚Alvorlig allergi mod jordnÃ¸dder. Kan   â”‚   â”‚   â”‚
â”‚ â”‚ðŸŸ Skaldyr      [ ]â”‚   â”‚ â”‚ â”‚forÃ¥rsage anafylaktisk shock. Streng   â”‚   â”‚   â”‚
â”‚ â”‚ðŸ… Tomater      [ ]â”‚   â”‚ â”‚ â”‚undgÃ¥else nÃ¸dvendig.                    â”‚   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚                                        â”‚   â”‚   â”‚
â”‚                          â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚ 7 allergi-typer          â”‚ â”‚                                                â”‚   â”‚
â”‚                          â”‚ â”‚ Ikon (emoji eller icon class)                  â”‚   â”‚
â”‚                          â”‚ â”‚ â„¹ï¸  F.eks. ðŸ¥œ eller i-heroicons-exclamation   â”‚   â”‚
â”‚                          â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚                          â”‚ â”‚ â”‚ðŸ¥œ                                      â”‚   â”‚   â”‚
â”‚                          â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚                          â”‚ â”‚                                                â”‚   â”‚
â”‚                          â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚                          â”‚ â”‚                  [Annuller]  [Gem allergi-type]â”‚   â”‚
â”‚                          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Master-Detail Pattern - Edit Mode:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ALLERGI-TYPER            â”‚ REDIGER ALLERGI-TYPE                                 â”‚
â”‚                          â”‚                                                      â”‚
â”‚ [+ Ny] [ðŸ“„ KÃ¸kken-PDF]   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                          â”‚ â”‚ ðŸ¥œ Peanuts (JordnÃ¸dder)                        â”‚   â”‚
â”‚ â„¹ï¸ Allergi-ansvarlige:   â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ ðŸ‘¤ Anna Hansen           â”‚ â”‚                                                â”‚   â”‚
â”‚ ðŸ‘¤ Bob Jensen            â”‚ â”‚ Navn *                                         â”‚   â”‚
â”‚                          â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚Peanuts                                 â”‚   â”‚   â”‚
â”‚ â”‚ðŸ¥œ Peanuts      [â€¢]â”‚   â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚ â”‚ðŸŒ¾ Gluten       [ ]â”‚   â”‚ â”‚                                                â”‚   â”‚
â”‚ â”‚ðŸ¥› Laktose      [ ]â”‚   â”‚ â”‚ Beskrivelse *                                  â”‚   â”‚
â”‚ â”‚ðŸ¥š Ã†g           [ ]â”‚   â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚ â”‚ðŸŒ° NÃ¸dder       [ ]â”‚   â”‚ â”‚ â”‚Alvorlig allergi mod jordnÃ¸dder. Kan   â”‚   â”‚   â”‚
â”‚ â”‚ðŸŸ Skaldyr      [ ]â”‚   â”‚ â”‚ â”‚forÃ¥rsage anafylaktisk shock. Streng   â”‚   â”‚   â”‚
â”‚ â”‚ðŸ… Tomater      [ ]â”‚   â”‚ â”‚ â”‚undgÃ¥else nÃ¸dvendig.                    â”‚   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚                                        â”‚   â”‚   â”‚
â”‚                          â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚                          â”‚ â”‚                                                â”‚   â”‚
â”‚                          â”‚ â”‚ Ikon (emoji eller icon class)                  â”‚   â”‚
â”‚                          â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚                          â”‚ â”‚ â”‚ðŸ¥œ                                      â”‚   â”‚   â”‚
â”‚                          â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚                          â”‚ â”‚                                                â”‚   â”‚
â”‚                          â”‚ â”‚ âš ï¸  3 beboere har denne allergi                â”‚   â”‚
â”‚                          â”‚ â”‚                                                â”‚   â”‚
â”‚                          â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚                          â”‚ â”‚                  [Annuller]  [Gem Ã¦ndringer]  â”‚   â”‚
â”‚                          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Mobile View - List:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ¥ Allergi-typer                 â”‚
â”‚                                  â”‚
â”‚ [+ Opret allergi-type]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸ¥œ Peanuts              (3) â–¶ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸŒ¾ Gluten               (1) â–¶ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸ¥› Laktose              (0) â–¶ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸ¥š Ã†g                   (2) â–¶ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸŒ° NÃ¸dder               (1) â–¶ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸŸ Skaldyr              (0) â–¶ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸ… Tomater              (1) â–¶ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚ 7 allergi-typer                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Mobile View - Detail:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â—€] ðŸ¥œ Peanuts                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸ¥œ Peanuts (JordnÃ¸dder)       â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚Alvorlig allergi mod          â”‚ â”‚
â”‚ â”‚jordnÃ¸dder. Kan forÃ¥rsage     â”‚ â”‚
â”‚ â”‚anafylaktisk shock. Streng    â”‚ â”‚
â”‚ â”‚undgÃ¥else nÃ¸dvendig.          â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚BEBOERE MED DENNE ALLERGI (3) â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚â”‚ðŸ‘¤ Anna Hansen              â”‚â”‚ â”‚
â”‚ â”‚â”‚ðŸ  SkrÃ¥ningen 31            â”‚â”‚ â”‚
â”‚ â”‚â”‚ðŸ’¬ Meget alvorlig - EpiPen  â”‚â”‚ â”‚
â”‚ â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚â”‚ðŸ‘¤ Bob Jensen               â”‚â”‚ â”‚
â”‚ â”‚â”‚ðŸ  Abbey Road 1             â”‚â”‚ â”‚
â”‚ â”‚â”‚ðŸ’¬ Mild reaktion            â”‚â”‚ â”‚
â”‚ â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚â”‚ðŸ‘¶ Clara Nielsen            â”‚â”‚ â”‚
â”‚ â”‚â”‚ðŸ  TvethÃ¸jvej 43, 1         â”‚â”‚ â”‚
â”‚ â”‚â”‚ðŸ’¬ Ingen kommentar          â”‚â”‚ â”‚
â”‚ â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚      [Rediger]  [Slet]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Delete Confirmation Modal:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  BekrÃ¦ft sletning                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ Slet allergi-typen "Peanuts"?                  â”‚
â”‚                                                 â”‚
â”‚ âš ï¸  ADVARSEL: Dette vil ogsÃ¥ slette ALLE       â”‚
â”‚    allergi-registreringer for denne type.      â”‚
â”‚                                                 â”‚
â”‚    3 beboere pÃ¥virkes.                         â”‚
â”‚                                                 â”‚
â”‚ Denne handling kan ikke fortrydes.             â”‚
â”‚                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            [Annuller]  [Slet allergi-type]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Kitchen PDF View (Print-friendly):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ“„ ALLERGI-OVERSIGT FOR KÃ˜KKENET                                          â”‚
â”‚ Opdateret: 15. januar 2025                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚ ðŸ¥œ PEANUTS (JORDNÃ˜DDER)                                                  â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                           â”‚
â”‚ Alvorlig allergi mod jordnÃ¸dder. Kan forÃ¥rsage anafylaktisk shock.      â”‚
â”‚ Streng undgÃ¥else nÃ¸dvendig.                                               â”‚
â”‚                                                                           â”‚
â”‚ BEBOERE (3):                                                              â”‚
â”‚ â€¢ Anna Hansen (SkrÃ¥ningen 31) - Meget alvorlig - har EpiPen             â”‚
â”‚ â€¢ Bob Jensen (Abbey Road 1) - Mild reaktion - undgÃ¥ direkte kontakt     â”‚
â”‚ â€¢ Clara Nielsen (TvethÃ¸jvej 43, 1) - Ingen kommentar                     â”‚
â”‚                                                                           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚ ðŸŒ¾ GLUTEN (COELIAC DISEASE)                                              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                           â”‚
â”‚ Coeliac disease - streng glutenfri kost pÃ¥krÃ¦vet.                        â”‚
â”‚                                                                           â”‚
â”‚ BEBOERE (1):                                                              â”‚
â”‚ â€¢ David Larsen (Penny Lane 4) - Diagnosticeret 2020, meget fÃ¸lsom       â”‚
â”‚                                                                           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚ ðŸ¥› LAKTOSE (LAKTOSEINTOLERANS)                                           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                           â”‚
â”‚ Laktoseintolerans - undgÃ¥ mÃ¦lkeprodukter.                                â”‚
â”‚                                                                           â”‚
â”‚ BEBOERE (2):                                                              â”‚
â”‚ â€¢ Emma Petersen (Rosenvej 12) - Kan tÃ¥le smÃ¥ mÃ¦ngder                    â”‚
â”‚ â€¢ Freja Andersen (Bakken 5) - Meget fÃ¸lsom - undgÃ¥ alle produkter       â”‚
â”‚                                                                           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                           â”‚
â”‚ â„¹ï¸  KONTAKT ALLERGI-ANSVARLIGE VED SPÃ˜RGSMÃ…L:                            â”‚
â”‚ ðŸ‘¤ Anna Hansen - anna@example.com - 12 34 56 78                         â”‚
â”‚ ðŸ‘¤ Bob Jensen - bob@example.com - 23 45 67 89                           â”‚
â”‚                                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                [Download PDF]  [Print]  [Luk]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Household Allergy Management (/household/[shortname]/allergies)

**Busy-Parent Approach - Desktop View:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ  Hansen Familie                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Tilmeldinger]  [â€¢Allergier]  [Ã˜konomi]  [Indstillinger]                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚ Familiens allergier og diÃ¦tkrav                                                â”‚
â”‚                                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ðŸ‘¤ Anna Hansen (Voksen)                                                   â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                                                           â”‚   â”‚
â”‚ â”‚ ðŸ¥œ Peanuts - JordnÃ¸dder                                                   â”‚   â”‚
â”‚ â”‚    ðŸ’¬ "Meget alvorlig - har EpiPen"                                       â”‚   â”‚
â”‚ â”‚                                                                           â”‚   â”‚
â”‚ â”‚ ðŸŒ¾ Gluten - Coeliac disease                                               â”‚   â”‚
â”‚ â”‚    ðŸ’¬ "Diagnosticeret 2020, ingen gluten overhovedet"                     â”‚   â”‚
â”‚ â”‚                                                                           â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                        [Rediger kommentar]  [TilfÃ¸j mere] â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ðŸ‘¤ Bob Hansen (Voksen)                                                    â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                                                           â”‚   â”‚
â”‚ â”‚ â­• Ingen allergier registreret                                            â”‚   â”‚
â”‚ â”‚                                                                           â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                                         [TilfÃ¸j allergi]  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ðŸ‘¶ Clara Hansen (Barn, 5 Ã¥r)                                             â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                                                           â”‚   â”‚
â”‚ â”‚ ðŸ¥› Laktose - Laktoseintolerans                                            â”‚   â”‚
â”‚ â”‚    ðŸ’¬ "Kan tÃ¥le smÃ¥ mÃ¦ngder i kogte retter"                               â”‚   â”‚
â”‚ â”‚                                                                           â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                        [Rediger kommentar]  [TilfÃ¸j mere] â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ðŸ‘¶ David Hansen (Baby, 1 Ã¥r)                                             â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                                                           â”‚   â”‚
â”‚ â”‚ â­• Ingen allergier registreret                                            â”‚   â”‚
â”‚ â”‚                                                                           â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                                         [TilfÃ¸j allergi]  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â”‚ â„¹ï¸ KÃ¸kkenet ser disse allergier nÃ¥r de planlÃ¦gger menuen                       â”‚
â”‚                                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ðŸ“‹ Allergi-ansvarlige                                                     â”‚   â”‚
â”‚ â”‚ Kontakt ved spÃ¸rgsmÃ¥l eller opdateringer:                                â”‚   â”‚
â”‚ â”‚ ðŸ‘¤ Anna Hansen - anna@example.com - 12 34 56 78                         â”‚   â”‚
â”‚ â”‚ ðŸ‘¤ Bob Jensen - bob@example.com - 23 45 67 89                           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Busy-Parent Approach - Add Allergy Modal:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TilfÃ¸j allergi til Bob Hansen                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Allergi-type *                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ðŸ¥œ Peanuts                                      [â–¾] â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                             â”‚
â”‚ Kommentar til kokken (valgfri)                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚Mild reaktion - undgÃ¥ direkte kontakt               â”‚     â”‚
â”‚ â”‚                                                     â”‚     â”‚
â”‚ â”‚                                                     â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              [Annuller]  [Gem allergi]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Busy-Parent Approach - Edit Comment Modal:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rediger kommentar - Anna Hansen / Peanuts                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Kommentar til kokken                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚Meget alvorlig - har EpiPen. UndgÃ¥ alt med nÃ¸dder  â”‚     â”‚
â”‚ â”‚eller spor af nÃ¸dder.                                â”‚     â”‚
â”‚ â”‚                                                     â”‚     â”‚
â”‚ â”‚                                                     â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        [Annuller]  [Gem]  [Slet allergi]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Mobile View:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ  Hansen Familie                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Tilmeld.] [â€¢Allergier] [Ã˜ko]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚
â”‚ Familiens allergier              â”‚
â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸ‘¤ Anna Hansen (Voksen)       â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚ðŸ¥œ Peanuts - JordnÃ¸dder       â”‚ â”‚
â”‚ â”‚ðŸ’¬ Meget alvorlig - EpiPen    â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚ðŸŒ¾ Gluten - Coeliac disease   â”‚ â”‚
â”‚ â”‚ðŸ’¬ Diagnosticeret 2020        â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚      [Rediger]  [TilfÃ¸j]    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸ‘¤ Bob Hansen (Voksen)        â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚â­• Ingen allergier            â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚            [TilfÃ¸j allergi] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸ‘¶ Clara Hansen (Barn, 5)     â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚ðŸ¥› Laktose - Laktoseintoleransâ”‚ â”‚
â”‚ â”‚ðŸ’¬ Kan tÃ¥le smÃ¥ mÃ¦ngder       â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚      [Rediger]  [TilfÃ¸j]    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸ‘¶ David Hansen (Baby, 1)     â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚â­• Ingen allergier            â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚            [TilfÃ¸j allergi] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚ â„¹ï¸ KÃ¸kkenet ser disse allergier â”‚
â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸ“‹ Allergi-ansvarlige         â”‚ â”‚
â”‚ â”‚ðŸ‘¤ Anna Hansen                â”‚ â”‚
â”‚ â”‚   anna@example.com           â”‚ â”‚
â”‚ â”‚   12 34 56 78                â”‚ â”‚
â”‚ â”‚ðŸ‘¤ Bob Jensen                 â”‚ â”‚
â”‚ â”‚   bob@example.com            â”‚ â”‚
â”‚ â”‚   23 45 67 89                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Mobile View - Add Allergy Modal:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TilfÃ¸j allergi til Bob Hansen    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚
â”‚ Allergi-type *                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ðŸ¥œ Peanuts                [â–¾]â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚ Kommentar til kokken             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Mild reaktion - undgÃ¥ direkteâ”‚ â”‚
â”‚ â”‚kontakt                       â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       [Annuller]  [Gem allergi] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Phase 1: Foundation - Composables

### File: `app/composables/useAllergyValidation.ts`

Create validation schemas following the pattern from `useHouseholdValidation.ts`.

**Structure:**

```typescript
import {z} from 'zod'

export const useAllergyValidation = () => {
    // Base AllergyType schema
    const BaseAllergyTypeSchema = z.object({
        id: z.number().int().positive().optional(),
        name: z.string().min(1, "Navn skal vÃ¦re mindst 1 karakter").max(100),
        description: z.string().min(1).max(500),
        icon: z.string().max(50).optional().nullable() // Emoji or icon class
    })

    // Base Allergy schema
    const BaseAllergySchema = z.object({
        id: z.number().int().positive().optional(),
        inhabitantId: z.number().int().positive(),
        allergyTypeId: z.number().int().positive(),
        inhabitantComment: z.string().max(500).optional().nullable(),
        createdAt: z.coerce.date().optional(),
        updatedAt: z.coerce.date().optional()
    })

    // AllergyType CRUD schemas
    const AllergyTypeCreateSchema = BaseAllergyTypeSchema.omit({ id: true })
    const AllergyTypeUpdateSchema = BaseAllergyTypeSchema.partial().extend({
        id: z.number().int().positive()
    })
    const AllergyTypeResponseSchema = BaseAllergyTypeSchema.required({
        id: true,
        name: true,
        description: true
    })

    // AllergyType with inhabitants (for admin view)
    // Uses InhabitantDisplay from useHouseholdValidation
    const AllergyTypeWithInhabitantsSchema = AllergyTypeResponseSchema.extend({
        inhabitants: z.array(z.lazy(() => {
            const {InhabitantDisplaySchema} = useHouseholdValidation()
            return InhabitantDisplaySchema
        }))
    })

    // Allergy CRUD schemas
    const AllergyCreateSchema = BaseAllergySchema.omit({ id: true, createdAt: true, updatedAt: true })
    const AllergyUpdateSchema = BaseAllergySchema.partial().extend({
        id: z.number().int().positive()
    })
    const AllergyResponseSchema = BaseAllergySchema.required({
        id: true,
        inhabitantId: true,
        allergyTypeId: true
    })

    // Allergy with relations (for household view - nested by inhabitant)
    const AllergyWithTypeSchema = AllergyResponseSchema.extend({
        allergyType: AllergyTypeResponseSchema
    })

    // Inhabitant with allergies (for grouping)
    const InhabitantWithAllergiesSchema = z.lazy(() => {
        const {InhabitantDisplaySchema} = useHouseholdValidation()
        return InhabitantDisplaySchema.extend({
            allergies: z.array(AllergyWithTypeSchema)
        })
    })

    return {
        BaseAllergyTypeSchema,
        AllergyTypeCreateSchema,
        AllergyTypeUpdateSchema,
        AllergyTypeResponseSchema,
        AllergyTypeWithInhabitantsSchema,
        BaseAllergySchema,
        AllergyCreateSchema,
        AllergyUpdateSchema,
        AllergyResponseSchema,
        AllergyWithTypeSchema,
        InhabitantWithAllergiesSchema
    }
}

// Type exports
export type AllergyType = z.infer<ReturnType<typeof useAllergyValidation>['BaseAllergyTypeSchema']>
export type AllergyTypeCreate = z.infer<ReturnType<typeof useAllergyValidation>['AllergyTypeCreateSchema']>
export type AllergyTypeUpdate = z.infer<ReturnType<typeof useAllergyValidation>['AllergyTypeUpdateSchema']>
export type AllergyTypeResponse = z.infer<ReturnType<typeof useAllergyValidation>['AllergyTypeResponseSchema']>
export type AllergyTypeWithInhabitants = z.infer<ReturnType<typeof useAllergyValidation>['AllergyTypeWithInhabitantsSchema']>

export type Allergy = z.infer<ReturnType<typeof useAllergyValidation>['BaseAllergySchema']>
export type AllergyCreate = z.infer<ReturnType<typeof useAllergyValidation>['AllergyCreateSchema']>
export type AllergyUpdate = z.infer<ReturnType<typeof useAllergyValidation>['AllergyUpdateSchema']>
export type AllergyResponse = z.infer<ReturnType<typeof useAllergyValidation>['AllergyResponseSchema']>
export type AllergyWithType = z.infer<ReturnType<typeof useAllergyValidation>['AllergyWithTypeSchema']>
export type InhabitantWithAllergies = z.infer<ReturnType<typeof useAllergyValidation>['InhabitantWithAllergiesSchema']>
```

**Key Points:**
- Follow existing pattern from `useHouseholdValidation.ts`
- Use `z.lazy()` for cross-composable references (InhabitantDisplay)
- Separate index (with inhabitants) and detail schemas
- Validate icon as string (emoji or class name)

---

## Phase 2: Repository Functions

### File: `server/data/prismaRepository.ts`

Add functions following the pattern from household functions (lines 329-378).

### AllergyType Functions

```typescript
/**
 * Fetch all allergy types with inhabitants who have each allergy
 * ADR-009: Index endpoint - includes lightweight inhabitant data
 */
export async function fetchAllergyTypes(d1Client: D1Database): Promise<AllergyTypeWithInhabitants[]> {
    console.info(`ðŸ¥ > ALLERGY_TYPE > [GET] Fetching allergy types with inhabitants`)
    const prisma = await getPrismaClientConnection(d1Client)

    try {
        const allergyTypes = await prisma.allergyType.findMany({
            include: {
                Allergy: {
                    include: {
                        inhabitant: {
                            select: {
                                id: true,
                                name: true,
                                lastName: true,
                                pictureUrl: true,
                                birthDate: true
                            }
                        }
                    }
                }
            }
        })

        // Transform: flatten to include inhabitants directly (not nested allergies)
        const result = allergyTypes.map(at => ({
            id: at.id,
            name: at.name,
            description: at.description,
            icon: at.icon,
            inhabitants: at.Allergy.map(a => a.inhabitant)
        }))

        console.info(`ðŸ¥ > ALLERGY_TYPE > [GET] Fetched ${result.length} allergy types`)
        return result
    } catch (error) {
        const h3e = h3eFromCatch('Error fetching allergy types', error)
        console.error(`ðŸ¥ > ALLERGY_TYPE > [GET] ${h3e.statusMessage}`, error)
        throw h3e
    }
}

export async function fetchAllergyType(d1Client: D1Database, id: number): Promise<AllergyTypeResponse | null> {
    console.info(`ðŸ¥ > ALLERGY_TYPE > [GET] Fetching allergy type with ID ${id}`)
    const prisma = await getPrismaClientConnection(d1Client)

    try {
        const allergyType = await prisma.allergyType.findFirst({ where: { id } })
        if (!allergyType) return null

        console.info(`ðŸ¥ > ALLERGY_TYPE > [GET] Found allergy type: ${allergyType.name}`)
        return allergyType
    } catch (error) {
        const h3e = h3eFromCatch('Error fetching allergy type', error)
        console.error(`ðŸ¥ > ALLERGY_TYPE > [GET] ${h3e.statusMessage}`, error)
        throw h3e
    }
}

export async function createAllergyType(d1Client: D1Database, data: AllergyTypeCreate): Promise<AllergyTypeResponse> {
    console.info(`ðŸ¥ > ALLERGY_TYPE > [PUT] Creating allergy type: ${data.name}`)
    const prisma = await getPrismaClientConnection(d1Client)

    try {
        const allergyType = await prisma.allergyType.create({ data })
        console.info(`ðŸ¥ > ALLERGY_TYPE > [PUT] Created allergy type with ID ${allergyType.id}`)
        return allergyType
    } catch (error) {
        const h3e = h3eFromCatch('Error creating allergy type', error)
        console.error(`ðŸ¥ > ALLERGY_TYPE > [PUT] ${h3e.statusMessage}`, error)
        throw h3e
    }
}

export async function updateAllergyType(d1Client: D1Database, id: number, data: Partial<AllergyTypeUpdate>): Promise<AllergyTypeResponse> {
    console.info(`ðŸ¥ > ALLERGY_TYPE > [PATCH] Updating allergy type with ID ${id}`)
    const prisma = await getPrismaClientConnection(d1Client)

    try {
        const allergyType = await prisma.allergyType.update({
            where: { id },
            data
        })
        console.info(`ðŸ¥ > ALLERGY_TYPE > [PATCH] Updated allergy type: ${allergyType.name}`)
        return allergyType
    } catch (error) {
        const h3e = h3eFromCatch('Error updating allergy type', error)
        console.error(`ðŸ¥ > ALLERGY_TYPE > [PATCH] ${h3e.statusMessage}`, error)
        throw h3e
    }
}

export async function deleteAllergyType(d1Client: D1Database, id: number): Promise<AllergyTypeResponse> {
    console.info(`ðŸ¥ > ALLERGY_TYPE > [DELETE] Deleting allergy type with ID ${id}`)
    const prisma = await getPrismaClientConnection(d1Client)

    try {
        // Prisma will CASCADE delete all related Allergy records (schema onDelete: Cascade)
        const allergyType = await prisma.allergyType.delete({ where: { id } })
        console.info(`ðŸ¥ > ALLERGY_TYPE > [DELETE] Deleted allergy type: ${allergyType.name}`)
        return allergyType
    } catch (error) {
        const h3e = h3eFromCatch('Error deleting allergy type', error)
        console.error(`ðŸ¥ > ALLERGY_TYPE > [DELETE] ${h3e.statusMessage}`, error)
        throw h3e
    }
}
```

### Allergy Functions

```typescript
/**
 * Fetch allergies for a household, grouped by inhabitant
 */
export async function fetchAllergiesByHousehold(d1Client: D1Database, householdId: number): Promise<InhabitantWithAllergies[]> {
    console.info(`ðŸ¥ > ALLERGY > [GET] Fetching allergies for household ${householdId}`)
    const prisma = await getPrismaClientConnection(d1Client)

    try {
        const inhabitants = await prisma.inhabitant.findMany({
            where: { householdId },
            select: {
                id: true,
                name: true,
                lastName: true,
                pictureUrl: true,
                birthDate: true,
                allergies: {
                    include: {
                        allergyType: true
                    }
                }
            }
        })

        console.info(`ðŸ¥ > ALLERGY > [GET] Fetched allergies for ${inhabitants.length} inhabitants`)
        return inhabitants
    } catch (error) {
        const h3e = h3eFromCatch('Error fetching household allergies', error)
        console.error(`ðŸ¥ > ALLERGY > [GET] ${h3e.statusMessage}`, error)
        throw h3e
    }
}

export async function createAllergy(d1Client: D1Database, data: AllergyCreate): Promise<AllergyResponse> {
    console.info(`ðŸ¥ > ALLERGY > [PUT] Creating allergy for inhabitant ${data.inhabitantId}`)
    const prisma = await getPrismaClientConnection(d1Client)

    try {
        const allergy = await prisma.allergy.create({ data })
        console.info(`ðŸ¥ > ALLERGY > [PUT] Created allergy with ID ${allergy.id}`)
        return allergy
    } catch (error) {
        const h3e = h3eFromCatch('Error creating allergy', error)
        console.error(`ðŸ¥ > ALLERGY > [PUT] ${h3e.statusMessage}`, error)
        throw h3e
    }
}

export async function updateAllergy(d1Client: D1Database, id: number, data: Partial<AllergyUpdate>): Promise<AllergyResponse> {
    console.info(`ðŸ¥ > ALLERGY > [PATCH] Updating allergy with ID ${id}`)
    const prisma = await getPrismaClientConnection(d1Client)

    try {
        const allergy = await prisma.allergy.update({
            where: { id },
            data
        })
        console.info(`ðŸ¥ > ALLERGY > [PATCH] Updated allergy`)
        return allergy
    } catch (error) {
        const h3e = h3eFromCatch('Error updating allergy', error)
        console.error(`ðŸ¥ > ALLERGY > [PATCH] ${h3e.statusMessage}`, error)
        throw h3e
    }
}

export async function deleteAllergy(d1Client: D1Database, id: number): Promise<AllergyResponse> {
    console.info(`ðŸ¥ > ALLERGY > [DELETE] Deleting allergy with ID ${id}`)
    const prisma = await getPrismaClientConnection(d1Client)

    try {
        const allergy = await prisma.allergy.delete({ where: { id } })
        console.info(`ðŸ¥ > ALLERGY > [DELETE] Deleted allergy`)
        return allergy
    } catch (error) {
        const h3e = h3eFromCatch('Error deleting allergy', error)
        console.error(`ðŸ¥ > ALLERGY > [DELETE] ${h3e.statusMessage}`, error)
        throw h3e
    }
}
```

**Key Points:**
- `fetchAllergyTypes`: Include lightweight inhabitant data (name, avatar)
- `fetchAllergiesByHousehold`: Group by inhabitant, include allergyType
- Follow ADR-004 logging standards
- Use h3eFromCatch for error handling

---

## Phase 3: API Routes

### Admin AllergyType Routes

#### File: `server/routes/api/admin/allergy-type/index.get.ts`

```typescript
import {fetchAllergyTypes} from "~/server/data/prismaRepository"

export default defineEventHandler(async (event) => {
    const {cloudflare} = event.context
    const d1Client = cloudflare.env.DB

    try {
        const allergyTypes = await fetchAllergyTypes(d1Client)
        setResponseStatus(event, 200)
        return allergyTypes
    } catch (error) {
        throw createError({statusCode: 500, message: 'Server Error', cause: error})
    }
})
```

#### File: `server/routes/api/admin/allergy-type/index.put.ts`

```typescript
import {createAllergyType} from "~/server/data/prismaRepository"
import {useAllergyValidation} from "~/composables/useAllergyValidation"

export default defineEventHandler(async (event) => {
    const {cloudflare} = event.context
    const d1Client = cloudflare.env.DB
    const {AllergyTypeCreateSchema} = useAllergyValidation()

    // Validation
    let requestData
    try {
        requestData = await readValidatedBody(event, AllergyTypeCreateSchema.parse)
    } catch (error) {
        throw createError({statusCode: 400, message: 'Invalid input', cause: error})
    }

    // Business logic
    try {
        const allergyType = await createAllergyType(d1Client, requestData)
        setResponseStatus(event, 201)
        return allergyType
    } catch (error) {
        throw createError({statusCode: 500, message: 'Server Error', cause: error})
    }
})
```

#### File: `server/routes/api/admin/allergy-type/[id].get.ts`

```typescript
import {fetchAllergyType} from "~/server/data/prismaRepository"
import {z} from "zod"

const idSchema = z.object({
    id: z.coerce.number().int().positive()
})

export default defineEventHandler(async (event) => {
    const {cloudflare} = event.context
    const d1Client = cloudflare.env.DB

    // Validation
    let id
    try {
        const params = await getValidatedRouterParams(event, idSchema.parse)
        id = params.id
    } catch (error) {
        throw createError({statusCode: 400, message: 'Invalid input', cause: error})
    }

    // Business logic
    try {
        const allergyType = await fetchAllergyType(d1Client, id)
        if (!allergyType) {
            throw createError({statusCode: 404, message: 'AllergyType not found'})
        }
        setResponseStatus(event, 200)
        return allergyType
    } catch (error) {
        if (error.statusCode) throw error
        throw createError({statusCode: 500, message: 'Server Error', cause: error})
    }
})
```

#### File: `server/routes/api/admin/allergy-type/[id].patch.ts`

```typescript
import {updateAllergyType} from "~/server/data/prismaRepository"
import {useAllergyValidation} from "~/composables/useAllergyValidation"
import {z} from "zod"

const idSchema = z.object({
    id: z.coerce.number().int().positive()
})

export default defineEventHandler(async (event) => {
    const {cloudflare} = event.context
    const d1Client = cloudflare.env.DB
    const {AllergyTypeUpdateSchema} = useAllergyValidation()

    // Validation
    let id, requestData
    try {
        const params = await getValidatedRouterParams(event, idSchema.parse)
        id = params.id
        requestData = await readValidatedBody(event, AllergyTypeUpdateSchema.partial().parse)
    } catch (error) {
        throw createError({statusCode: 400, message: 'Invalid input', cause: error})
    }

    // Business logic
    try {
        const allergyType = await updateAllergyType(d1Client, id, requestData)
        setResponseStatus(event, 200)
        return allergyType
    } catch (error) {
        throw createError({statusCode: 500, message: 'Server Error', cause: error})
    }
})
```

#### File: `server/routes/api/admin/allergy-type/[id].delete.ts`

```typescript
import {deleteAllergyType} from "~/server/data/prismaRepository"
import {z} from "zod"

const idSchema = z.object({
    id: z.coerce.number().int().positive()
})

export default defineEventHandler(async (event) => {
    const {cloudflare} = event.context
    const d1Client = cloudflare.env.DB

    // Validation
    let id
    try {
        const params = await getValidatedRouterParams(event, idSchema.parse)
        id = params.id
    } catch (error) {
        throw createError({statusCode: 400, message: 'Invalid input', cause: error})
    }

    // Business logic
    try {
        const allergyType = await deleteAllergyType(d1Client, id)
        setResponseStatus(event, 200)
        return allergyType
    } catch (error) {
        throw createError({statusCode: 500, message: 'Server Error', cause: error})
    }
})
```

### Household Allergy Routes

#### File: `server/routes/api/household/[householdId]/allergy/index.get.ts`

```typescript
import {fetchAllergiesByHousehold} from "~/server/data/prismaRepository"
import {z} from "zod"

const householdIdSchema = z.object({
    householdId: z.coerce.number().int().positive()
})

export default defineEventHandler(async (event) => {
    const {cloudflare} = event.context
    const d1Client = cloudflare.env.DB

    // Validation
    let householdId
    try {
        const params = await getValidatedRouterParams(event, householdIdSchema.parse)
        householdId = params.householdId
    } catch (error) {
        throw createError({statusCode: 400, message: 'Invalid input', cause: error})
    }

    // TODO: Authorization - verify user has access to this household
    // const session = await requireUserSession(event)
    // if (session.user.Inhabitant?.householdId !== householdId && session.user.systemRole !== 'ADMIN') {
    //     throw createError({statusCode: 403, message: 'Forbidden'})
    // }

    // Business logic
    try {
        const inhabitants = await fetchAllergiesByHousehold(d1Client, householdId)
        setResponseStatus(event, 200)
        return inhabitants
    } catch (error) {
        throw createError({statusCode: 500, message: 'Server Error', cause: error})
    }
})
```

#### File: `server/routes/api/household/[householdId]/allergy/index.put.ts`

```typescript
import {createAllergy} from "~/server/data/prismaRepository"
import {useAllergyValidation} from "~/composables/useAllergyValidation"
import {z} from "zod"

const householdIdSchema = z.object({
    householdId: z.coerce.number().int().positive()
})

export default defineEventHandler(async (event) => {
    const {cloudflare} = event.context
    const d1Client = cloudflare.env.DB
    const {AllergyCreateSchema} = useAllergyValidation()

    // Validation
    let householdId, requestData
    try {
        const params = await getValidatedRouterParams(event, householdIdSchema.parse)
        householdId = params.householdId
        requestData = await readValidatedBody(event, AllergyCreateSchema.parse)
    } catch (error) {
        throw createError({statusCode: 400, message: 'Invalid input', cause: error})
    }

    // TODO: Authorization - verify inhabitant belongs to this household
    // Fetch inhabitant and check householdId matches

    // Business logic
    try {
        const allergy = await createAllergy(d1Client, requestData)
        setResponseStatus(event, 201)
        return allergy
    } catch (error) {
        throw createError({statusCode: 500, message: 'Server Error', cause: error})
    }
})
```

#### File: `server/routes/api/household/[householdId]/allergy/[id].patch.ts`

```typescript
import {updateAllergy} from "~/server/data/prismaRepository"
import {useAllergyValidation} from "~/composables/useAllergyValidation"
import {z} from "zod"

const paramsSchema = z.object({
    householdId: z.coerce.number().int().positive(),
    id: z.coerce.number().int().positive()
})

export default defineEventHandler(async (event) => {
    const {cloudflare} = event.context
    const d1Client = cloudflare.env.DB
    const {AllergyUpdateSchema} = useAllergyValidation()

    // Validation
    let params, requestData
    try {
        params = await getValidatedRouterParams(event, paramsSchema.parse)
        requestData = await readValidatedBody(event, AllergyUpdateSchema.partial().parse)
    } catch (error) {
        throw createError({statusCode: 400, message: 'Invalid input', cause: error})
    }

    // TODO: Authorization - verify allergy belongs to household

    // Business logic
    try {
        const allergy = await updateAllergy(d1Client, params.id, requestData)
        setResponseStatus(event, 200)
        return allergy
    } catch (error) {
        throw createError({statusCode: 500, message: 'Server Error', cause: error})
    }
})
```

#### File: `server/routes/api/household/[householdId]/allergy/[id].delete.ts`

```typescript
import {deleteAllergy} from "~/server/data/prismaRepository"
import {z} from "zod"

const paramsSchema = z.object({
    householdId: z.coerce.number().int().positive(),
    id: z.coerce.number().int().positive()
})

export default defineEventHandler(async (event) => {
    const {cloudflare} = event.context
    const d1Client = cloudflare.env.DB

    // Validation
    let params
    try {
        params = await getValidatedRouterParams(event, paramsSchema.parse)
    } catch (error) {
        throw createError({statusCode: 400, message: 'Invalid input', cause: error})
    }

    // TODO: Authorization - verify allergy belongs to household

    // Business logic
    try {
        const allergy = await deleteAllergy(d1Client, params.id)
        setResponseStatus(event, 200)
        return allergy
    } catch (error) {
        throw createError({statusCode: 500, message: 'Server Error', cause: error})
    }
})
```

**Key Points:**
- Follow ADR-002: Separate try-catch for validation and business logic
- Use `getValidatedRouterParams` and `readValidatedBody`
- TODO: Add authorization checks for household routes
- 400 for validation errors, 404 for not found, 500 for server errors

---

## Phase 4: Stores

### File: `app/stores/allergyTypes.ts`

```typescript
import type {AllergyTypeWithInhabitants, AllergyTypeCreate, AllergyTypeUpdate} from '~/composables/useAllergyValidation'

/**
 * AllergyType store - admin-managed global allergy type catalog
 * Following ADR-007: Store owns server data, component owns UI state
 */
export const useAllergyTypesStore = defineStore("AllergyTypes", () => {

    // STATE - Server data
    const selectedAllergyTypeId = ref<number | null>(null)

    // useFetch for list (immediate: true for autoload)
    const {
        data: allergyTypes,
        status: allergyTypesStatus,
        error: allergyTypesError,
        refresh: refreshAllergyTypes
    } = useFetch<AllergyTypeWithInhabitants[]>('/api/admin/allergy-type', {
        immediate: true,
        watch: false,
        default: () => []
    })

    // Computed - Status-derived state (4-state UI)
    const isAllergyTypesLoading = computed(() => allergyTypesStatus.value === 'pending')
    const isAllergyTypesErrored = computed(() => allergyTypesStatus.value === 'error')
    const isAllergyTypesInitialized = computed(() => allergyTypesStatus.value === 'success')
    const isNoAllergyTypes = computed(() => isAllergyTypesInitialized.value && allergyTypes.value.length === 0)

    // Convenience computed
    const isAllergyTypesStoreReady = computed(() => isAllergyTypesInitialized.value)

    // Selected allergy type
    const selectedAllergyType = computed(() =>
        allergyTypes.value.find(at => at.id === selectedAllergyTypeId.value) ?? null
    )

    // Actions
    const loadAllergyTypes = async () => {
        await refreshAllergyTypes()
        if (allergyTypesError.value) {
            console.error(`ðŸ¥ > ALLERGY_TYPES_STORE > Error loading allergy types:`, allergyTypesError.value)
            throw allergyTypesError.value
        }
        console.info(`ðŸ¥ > ALLERGY_TYPES_STORE > Loaded ${allergyTypes.value.length} allergy types`)
    }

    const selectAllergyType = (id: number | null) => {
        selectedAllergyTypeId.value = id
    }

    const createAllergyType = async (data: AllergyTypeCreate) => {
        console.info(`ðŸ¥ > ALLERGY_TYPES_STORE > Creating allergy type: ${data.name}`)
        try {
            await $fetch('/api/admin/allergy-type', {
                method: 'PUT',
                body: data
            })
            await loadAllergyTypes() // Refresh list
            console.info(`ðŸ¥ > ALLERGY_TYPES_STORE > Created allergy type`)
        } catch (error) {
            console.error(`ðŸ¥ > ALLERGY_TYPES_STORE > Error creating allergy type:`, error)
            throw error
        }
    }

    const updateAllergyType = async (id: number, data: Partial<AllergyTypeUpdate>) => {
        console.info(`ðŸ¥ > ALLERGY_TYPES_STORE > Updating allergy type ${id}`)
        try {
            await $fetch(`/api/admin/allergy-type/${id}`, {
                method: 'PATCH',
                body: data
            })
            await loadAllergyTypes() // Refresh list
            console.info(`ðŸ¥ > ALLERGY_TYPES_STORE > Updated allergy type`)
        } catch (error) {
            console.error(`ðŸ¥ > ALLERGY_TYPES_STORE > Error updating allergy type:`, error)
            throw error
        }
    }

    const deleteAllergyType = async (id: number) => {
        console.info(`ðŸ¥ > ALLERGY_TYPES_STORE > Deleting allergy type ${id}`)
        try {
            await $fetch(`/api/admin/allergy-type/${id}`, {
                method: 'DELETE'
            })
            await loadAllergyTypes() // Refresh list
            console.info(`ðŸ¥ > ALLERGY_TYPES_STORE > Deleted allergy type (CASCADE removed all allergies)`)
        } catch (error) {
            console.error(`ðŸ¥ > ALLERGY_TYPES_STORE > Error deleting allergy type:`, error)
            throw error
        }
    }

    // Initialization
    const initAllergyTypesStore = () => {
        // Auto-loads via immediate: true
        console.info(`ðŸ¥ > ALLERGY_TYPES_STORE > Initialized`)
    }

    return {
        // State
        allergyTypes,
        allergyTypesError,
        selectedAllergyType,
        // Computed
        isAllergyTypesLoading,
        isAllergyTypesErrored,
        isAllergyTypesInitialized,
        isNoAllergyTypes,
        isAllergyTypesStoreReady,
        // Actions
        initAllergyTypesStore,
        loadAllergyTypes,
        selectAllergyType,
        createAllergyType,
        updateAllergyType,
        deleteAllergyType
    }
})
```

### File: `app/stores/allergies.ts`

```typescript
import type {InhabitantWithAllergies, AllergyCreate, AllergyUpdate} from '~/composables/useAllergyValidation'

/**
 * Allergy store - household-scoped allergy assignments
 * Following ADR-007: Store owns server data, component owns UI state
 */
export const useAllergiesStore = defineStore("Allergies", () => {

    // STATE
    const currentHouseholdId = ref<number | null>(null)

    // useFetch for household allergies
    const {
        data: inhabitants,
        status: allergiesStatus,
        error: allergiesError,
        refresh: refreshAllergies
    } = useAsyncData<InhabitantWithAllergies[]>(
        () => `/api/household/${currentHouseholdId.value}/allergy`,
        () => {
            if (!currentHouseholdId.value) return Promise.resolve([])
            return $fetch(`/api/household/${currentHouseholdId.value}/allergy`)
        },
        {
            default: () => [],
            watch: false
        }
    )

    // Computed - Status-derived state
    const isAllergiesLoading = computed(() => allergiesStatus.value === 'pending')
    const isAllergiesErrored = computed(() => allergiesStatus.value === 'error')
    const isAllergiesInitialized = computed(() => allergiesStatus.value === 'success')
    const isAllergiesStoreReady = computed(() => isAllergiesInitialized.value)

    // Actions
    const loadAllergiesForHousehold = async (householdId: number) => {
        currentHouseholdId.value = householdId
        await refreshAllergies()
        if (allergiesError.value) {
            console.error(`ðŸ¥ > ALLERGIES_STORE > Error loading allergies:`, allergiesError.value)
            throw allergiesError.value
        }
        console.info(`ðŸ¥ > ALLERGIES_STORE > Loaded allergies for household ${householdId}`)
    }

    const createAllergy = async (data: AllergyCreate) => {
        if (!currentHouseholdId.value) throw new Error('No household selected')

        console.info(`ðŸ¥ > ALLERGIES_STORE > Creating allergy`)
        try {
            await $fetch(`/api/household/${currentHouseholdId.value}/allergy`, {
                method: 'PUT',
                body: data
            })
            await refreshAllergies() // Refresh list
            console.info(`ðŸ¥ > ALLERGIES_STORE > Created allergy`)
        } catch (error) {
            console.error(`ðŸ¥ > ALLERGIES_STORE > Error creating allergy:`, error)
            throw error
        }
    }

    const updateAllergy = async (id: number, data: Partial<AllergyUpdate>) => {
        if (!currentHouseholdId.value) throw new Error('No household selected')

        console.info(`ðŸ¥ > ALLERGIES_STORE > Updating allergy ${id}`)
        try {
            await $fetch(`/api/household/${currentHouseholdId.value}/allergy/${id}`, {
                method: 'PATCH',
                body: data
            })
            await refreshAllergies() // Refresh list
            console.info(`ðŸ¥ > ALLERGIES_STORE > Updated allergy`)
        } catch (error) {
            console.error(`ðŸ¥ > ALLERGIES_STORE > Error updating allergy:`, error)
            throw error
        }
    }

    const deleteAllergy = async (id: number) => {
        if (!currentHouseholdId.value) throw new Error('No household selected')

        console.info(`ðŸ¥ > ALLERGIES_STORE > Deleting allergy ${id}`)
        try {
            await $fetch(`/api/household/${currentHouseholdId.value}/allergy/${id}`, {
                method: 'DELETE'
            })
            await refreshAllergies() // Refresh list
            console.info(`ðŸ¥ > ALLERGIES_STORE > Deleted allergy`)
        } catch (error) {
            console.error(`ðŸ¥ > ALLERGIES_STORE > Error deleting allergy:`, error)
            throw error
        }
    }

    // Initialization
    const initAllergiesStore = (householdId: number) => {
        loadAllergiesForHousehold(householdId)
    }

    return {
        // State
        inhabitants,
        allergiesError,
        currentHouseholdId,
        // Computed
        isAllergiesLoading,
        isAllergiesErrored,
        isAllergiesInitialized,
        isAllergiesStoreReady,
        // Actions
        initAllergiesStore,
        loadAllergiesForHousehold,
        createAllergy,
        updateAllergy,
        deleteAllergy
    }
})
```

**Key Points:**
- Follow ADR-007: useFetch patterns with status-derived state
- AllergyTypes: immediate: true (admin needs catalog loaded)
- Allergies: useAsyncData with reactive key (household-scoped)
- Expose 4 status computeds + convenience `isStoreReady`
- CRUD actions use $fetch, then refresh list

---

## Phase 5: UI Components

### Admin AllergyType Management

#### File: `app/components/admin/AdminAllergies.vue`

**Structure Overview:**

```vue
<script setup lang="ts">
import {useAllergyTypesStore} from '~/stores/allergyTypes'
import {storeToRefs} from 'pinia'
import {FORM_MODES} from '~/composables/useEntityFormManager'

const allergyTypesStore = useAllergyTypesStore()
const {
    allergyTypes,
    isAllergyTypesStoreReady,
    selectedAllergyType
} = storeToRefs(allergyTypesStore)

// Form state (component owns UI state per ADR-007)
const formMode = ref(FORM_MODES.VIEW)
const draft = ref<AllergyTypeCreate | AllergyTypeUpdate | null>(null)

// Initialize store
allergyTypesStore.initAllergyTypesStore()

// Form actions
const onCreateClick = () => {
    formMode.value = FORM_MODES.CREATE
    draft.value = { name: '', description: '', icon: null }
}

const onEditClick = (allergyType: AllergyTypeWithInhabitants) => {
    formMode.value = FORM_MODES.EDIT
    allergyTypesStore.selectAllergyType(allergyType.id)
    draft.value = { ...allergyType }
}

const onSave = async () => {
    if (!draft.value) return

    if (formMode.value === FORM_MODES.CREATE) {
        await allergyTypesStore.createAllergyType(draft.value as AllergyTypeCreate)
    } else if (formMode.value === FORM_MODES.EDIT && selectedAllergyType.value) {
        await allergyTypesStore.updateAllergyType(selectedAllergyType.value.id, draft.value)
    }

    formMode.value = FORM_MODES.VIEW
    draft.value = null
}

const onDelete = async (id: number) => {
    // Show confirmation modal (CASCADE warning)
    const confirmed = confirm('Dette vil slette allergi-typen og ALLE relaterede allergi-registreringer. Er du sikker?')
    if (!confirmed) return

    await allergyTypesStore.deleteAllergyType(id)
}

const onCancel = () => {
    formMode.value = FORM_MODES.VIEW
    draft.value = null
}
</script>

<template>
  <div data-test-id="admin-allergies" class="space-y-6">
    <div class="flex justify-between items-center">
      <h1 class="text-2xl font-bold">Allergi-typer</h1>
      <UButton
        v-if="formMode === FORM_MODES.VIEW"
        @click="onCreateClick"
        name="create-allergy-type"
        icon="i-heroicons-plus"
      >
        Opret allergi-type
      </UButton>
    </div>

    <!-- Loading state -->
    <Loader v-if="!isAllergyTypesStoreReady" text="IndlÃ¦ser allergi-typer..." />

    <!-- CREATE/EDIT Form -->
    <UCard v-else-if="formMode !== FORM_MODES.VIEW">
      <template #header>
        <h3 class="text-lg font-semibold">
          {{ formMode === FORM_MODES.CREATE ? 'Opret allergi-type' : 'Rediger allergi-type' }}
        </h3>
      </template>

      <div class="space-y-4">
        <UFormGroup label="Navn" required>
          <UInput v-model="draft.name" name="allergy-type-name" />
        </UFormGroup>

        <UFormGroup label="Beskrivelse" required>
          <UTextarea v-model="draft.description" name="allergy-type-description" />
        </UFormGroup>

        <UFormGroup label="Ikon (emoji eller icon class)" hint="F.eks. ðŸ¥œ eller i-heroicons-exclamation-triangle">
          <UInput v-model="draft.icon" name="allergy-type-icon" />
        </UFormGroup>
      </div>

      <template #footer>
        <div class="flex justify-end gap-2">
          <UButton variant="ghost" @click="onCancel" name="cancel-allergy-type">
            Annuller
          </UButton>
          <UButton @click="onSave" name="save-allergy-type">
            Gem
          </UButton>
        </div>
      </template>
    </UCard>

    <!-- LIST View -->
    <div v-else class="space-y-4">
      <UCard
        v-for="allergyType in allergyTypes"
        :key="allergyType.id"
        :data-testid="`allergy-type-${allergyType.id}`"
      >
        <template #header>
          <div class="flex justify-between items-center">
            <div class="flex items-center gap-3">
              <span class="text-2xl">{{ allergyType.icon || 'ðŸ¥' }}</span>
              <div>
                <h3 class="font-semibold">{{ allergyType.name }}</h3>
                <p class="text-sm text-muted">{{ allergyType.description }}</p>
              </div>
            </div>
            <div class="flex gap-2">
              <UButton
                variant="ghost"
                icon="i-heroicons-pencil"
                @click="onEditClick(allergyType)"
                :name="`edit-allergy-type-${allergyType.id}`"
              />
              <UButton
                variant="ghost"
                color="red"
                icon="i-heroicons-trash"
                @click="onDelete(allergyType.id)"
                :name="`delete-allergy-type-${allergyType.id}`"
              />
            </div>
          </div>
        </template>

        <!-- Inhabitants with this allergy (lightweight display) -->
        <div v-if="allergyType.inhabitants.length > 0" class="space-y-2">
          <p class="text-sm font-medium">Beboere med denne allergi:</p>
          <div class="flex flex-wrap gap-2">
            <div
              v-for="inhabitant in allergyType.inhabitants"
              :key="inhabitant.id"
              class="flex items-center gap-2 bg-muted px-3 py-1 rounded-full"
            >
              <UAvatar
                :src="inhabitant.pictureUrl"
                :alt="`${inhabitant.name} ${inhabitant.lastName}`"
                size="xs"
              />
              <span class="text-sm">{{ inhabitant.name }} {{ inhabitant.lastName }}</span>
            </div>
          </div>
        </div>
        <p v-else class="text-sm text-muted">Ingen beboere har denne allergi endnu.</p>
      </UCard>

      <UCard v-if="allergyTypes.length === 0">
        <p class="text-center text-muted">Ingen allergi-typer oprettet endnu.</p>
      </UCard>
    </div>
  </div>
</template>
```

**Key Features:**
- List view shows all AllergyType with inhabitants (avatar + name)
- Create/Edit form with name, description, icon fields
- DELETE shows CASCADE warning modal
- Follow existing admin component patterns

### Household Allergy Management

#### File: `app/components/household/HouseholdAllergies.vue`

**Structure Overview:**

```vue
<script setup lang="ts">
import {useAllergiesStore} from '~/stores/allergies'
import {useAllergyTypesStore} from '~/stores/allergyTypes'
import {useHouseholdsStore} from '~/stores/households'
import {storeToRefs} from 'pinia'

const props = defineProps<{
    household: HouseholdSummary
}>()

const allergiesStore = useAllergiesStore()
const allergyTypesStore = useAllergyTypesStore()
const householdsStore = useHouseholdsStore()

const {inhabitants, isAllergiesStoreReady} = storeToRefs(allergiesStore)
const {allergyTypes, isAllergyTypesStoreReady} = storeToRefs(allergyTypesStore)

// Form state
const showAddForm = ref(false)
const addDraft = ref<{
    inhabitantId: number | null
    allergyTypeId: number | null
    comment: string | null
}>({
    inhabitantId: null,
    allergyTypeId: null,
    comment: null
})

const editingAllergyId = ref<number | null>(null)
const editComment = ref<string | null>(null)

// Initialize stores
allergiesStore.initAllergiesStore(props.household.id)
allergyTypesStore.initAllergyTypesStore()

const isReady = computed(() => isAllergiesStoreReady.value && isAllergyTypesStoreReady.value)

// Actions
const onAddClick = () => {
    showAddForm.value = true
    addDraft.value = {inhabitantId: null, allergyTypeId: null, comment: null}
}

const onSaveAdd = async () => {
    if (!addDraft.value.inhabitantId || !addDraft.value.allergyTypeId) return

    await allergiesStore.createAllergy({
        inhabitantId: addDraft.value.inhabitantId,
        allergyTypeId: addDraft.value.allergyTypeId,
        inhabitantComment: addDraft.value.comment
    })

    showAddForm.value = false
}

const onEditComment = (allergyId: number, currentComment: string | null) => {
    editingAllergyId.value = allergyId
    editComment.value = currentComment
}

const onSaveComment = async (allergyId: number) => {
    await allergiesStore.updateAllergy(allergyId, {inhabitantComment: editComment.value})
    editingAllergyId.value = null
}

const onDeleteAllergy = async (allergyId: number) => {
    const confirmed = confirm('Er du sikker pÃ¥ du vil fjerne denne allergi?')
    if (!confirmed) return

    await allergiesStore.deleteAllergy(allergyId)
}
</script>

<template>
  <div data-test-id="household-allergies" class="space-y-6">
    <div class="flex justify-between items-center">
      <h3 class="text-lg font-semibold">Familiens allergier og diÃ¦tkrav</h3>
      <UButton
        v-if="!showAddForm"
        @click="onAddClick"
        name="add-allergy"
        icon="i-heroicons-plus"
      >
        TilfÃ¸j allergi
      </UButton>
    </div>

    <Loader v-if="!isReady" text="IndlÃ¦ser allergier..." />

    <!-- ADD Form -->
    <UCard v-else-if="showAddForm">
      <template #header>
        <h4 class="font-semibold">TilfÃ¸j allergi</h4>
      </template>

      <div class="space-y-4">
        <UFormGroup label="Beboer" required>
          <USelect
            v-model="addDraft.inhabitantId"
            name="select-inhabitant"
            :options="household.inhabitants.map(i => ({value: i.id, label: `${i.name} ${i.lastName}`}))"
          />
        </UFormGroup>

        <UFormGroup label="Allergi-type" required>
          <USelect
            v-model="addDraft.allergyTypeId"
            name="select-allergy-type"
            :options="allergyTypes.map(at => ({value: at.id, label: `${at.icon || ''} ${at.name}`}))"
          />
        </UFormGroup>

        <UFormGroup label="Kommentar til kokken" hint="F.eks. alvorlighed, symptomer">
          <UTextarea v-model="addDraft.comment" name="allergy-comment" />
        </UFormGroup>
      </div>

      <template #footer>
        <div class="flex justify-end gap-2">
          <UButton variant="ghost" @click="showAddForm = false" name="cancel-add-allergy">
            Annuller
          </UButton>
          <UButton @click="onSaveAdd" name="save-add-allergy">
            Gem
          </UButton>
        </div>
      </template>
    </UCard>

    <!-- LIST grouped by inhabitant -->
    <div v-else class="space-y-4">
      <UCard
        v-for="inhabitant in inhabitants"
        :key="inhabitant.id"
        :data-testid="`inhabitant-allergies-${inhabitant.id}`"
      >
        <template #header>
          <div class="flex items-center gap-3">
            <UAvatar
              :src="inhabitant.pictureUrl"
              :alt="`${inhabitant.name} ${inhabitant.lastName}`"
              size="md"
            />
            <div>
              <h4 class="font-semibold">{{ inhabitant.name }} {{ inhabitant.lastName }}</h4>
              <p class="text-sm text-muted">
                {{ inhabitant.allergies.length }} allergi{{ inhabitant.allergies.length !== 1 ? 'er' : '' }}
              </p>
            </div>
          </div>
        </template>

        <div v-if="inhabitant.allergies.length > 0" class="space-y-3">
          <div
            v-for="allergy in inhabitant.allergies"
            :key="allergy.id"
            class="flex items-start justify-between p-3 bg-muted rounded-lg"
            :data-testid="`allergy-${allergy.id}`"
          >
            <div class="flex items-start gap-3 flex-1">
              <span class="text-2xl">{{ allergy.allergyType.icon || 'ðŸ¥' }}</span>
              <div class="flex-1">
                <p class="font-medium">{{ allergy.allergyType.name }}</p>
                <p class="text-sm text-muted">{{ allergy.allergyType.description }}</p>

                <!-- Comment display/edit -->
                <div v-if="editingAllergyId === allergy.id" class="mt-2">
                  <UTextarea
                    v-model="editComment"
                    name="edit-comment"
                    placeholder="TilfÃ¸j kommentar..."
                  />
                  <div class="flex gap-2 mt-2">
                    <UButton size="xs" @click="onSaveComment(allergy.id)" name="save-comment">
                      Gem
                    </UButton>
                    <UButton size="xs" variant="ghost" @click="editingAllergyId = null" name="cancel-edit-comment">
                      Annuller
                    </UButton>
                  </div>
                </div>
                <div v-else-if="allergy.inhabitantComment" class="mt-2 p-2 bg-primary/10 rounded">
                  <p class="text-sm italic">{{ allergy.inhabitantComment }}</p>
                </div>
              </div>
            </div>

            <div class="flex gap-2">
              <UButton
                variant="ghost"
                size="xs"
                icon="i-heroicons-pencil"
                @click="onEditComment(allergy.id, allergy.inhabitantComment)"
                :name="`edit-comment-${allergy.id}`"
              />
              <UButton
                variant="ghost"
                size="xs"
                color="red"
                icon="i-heroicons-trash"
                @click="onDeleteAllergy(allergy.id)"
                :name="`delete-allergy-${allergy.id}`"
              />
            </div>
          </div>
        </div>
        <p v-else class="text-sm text-muted">Ingen allergier registreret.</p>
      </UCard>
    </div>
  </div>
</template>
```

**Key Features:**
- Grouped by inhabitant (matches API response structure)
- Add allergy: Select inhabitant + allergy type + optional comment
- Edit comment inline
- Delete allergy with confirmation
- Display allergy type icon + name + description
- Shows inhabitant avatar + name

---

## Phase 6: Test Factories

### File: `tests/e2e/testDataFactories/allergyTypeFactory.ts`

```typescript
import {expect, BrowserContext} from "@playwright/test"
import testHelpers from "../testHelpers"
import type {AllergyTypeCreate, AllergyTypeResponse} from "~/composables/useAllergyValidation"

const {salt, headers} = testHelpers
const ALLERGY_TYPE_ENDPOINT = '/api/admin/allergy-type'

export class AllergyTypeFactory {

    static readonly defaultAllergyTypeData = (testSalt: string = Date.now().toString()): AllergyTypeCreate => {
        return {
            name: salt('Test Allergy', testSalt),
            description: salt('Test allergy description', testSalt),
            icon: 'ðŸ¥'
        }
    }

    static readonly createAllergyType = async (
        context: BrowserContext,
        data?: Partial<AllergyTypeCreate>,
        expectedStatus: number = 201
    ): Promise<AllergyTypeResponse> => {
        const allergyTypeData = {
            ...this.defaultAllergyTypeData(),
            ...data
        }

        const response = await context.request.put(ALLERGY_TYPE_ENDPOINT, {
            headers: headers,
            data: allergyTypeData
        })

        const status = response.status()
        const responseBody = await response.json()

        expect(status, 'Unexpected status').toBe(expectedStatus)

        if (expectedStatus === 201) {
            expect(responseBody.id, 'Response should contain the new allergy type ID').toBeDefined()
        }

        return responseBody
    }

    static readonly getAllergyType = async (
        context: BrowserContext,
        id: number
    ): Promise<AllergyTypeResponse> => {
        const response = await context.request.get(`${ALLERGY_TYPE_ENDPOINT}/${id}`, {
            headers: headers
        })

        expect(response.status()).toBe(200)
        return await response.json()
    }

    static readonly deleteAllergyType = async (
        context: BrowserContext,
        allergyTypeId: number,
        expectedStatus: number = 200
    ): Promise<any> => {
        const response = await context.request.delete(`${ALLERGY_TYPE_ENDPOINT}/${allergyTypeId}`, {
            headers: headers
        })

        const status = response.status()
        expect(status, 'Unexpected status').toBe(expectedStatus)

        return await response.json()
    }

    static readonly cleanupAllergyTypes = async (
        context: BrowserContext,
        allergyTypeIds: number[]
    ): Promise<void> => {
        for (const id of allergyTypeIds) {
            try {
                await this.deleteAllergyType(context, id)
            } catch (error) {
                console.warn(`Failed to cleanup allergy type ${id}:`, error)
            }
        }
    }
}
```

### File: `tests/e2e/testDataFactories/allergyFactory.ts`

```typescript
import {expect, BrowserContext} from "@playwright/test"
import testHelpers from "../testHelpers"
import type {AllergyCreate, AllergyResponse} from "~/composables/useAllergyValidation"

const {headers} = testHelpers

export class AllergyFactory {

    static readonly defaultAllergyData = (
        inhabitantId: number,
        allergyTypeId: number,
        comment?: string
    ): AllergyCreate => {
        return {
            inhabitantId,
            allergyTypeId,
            inhabitantComment: comment ?? 'Test comment for chef'
        }
    }

    static readonly createAllergy = async (
        context: BrowserContext,
        householdId: number,
        data: AllergyCreate,
        expectedStatus: number = 201
    ): Promise<AllergyResponse> => {
        const response = await context.request.put(`/api/household/${householdId}/allergy`, {
            headers: headers,
            data: data
        })

        const status = response.status()
        const responseBody = await response.json()

        expect(status, 'Unexpected status').toBe(expectedStatus)

        if (expectedStatus === 201) {
            expect(responseBody.id, 'Response should contain the new allergy ID').toBeDefined()
        }

        return responseBody
    }

    static readonly deleteAllergy = async (
        context: BrowserContext,
        householdId: number,
        allergyId: number,
        expectedStatus: number = 200
    ): Promise<any> => {
        const response = await context.request.delete(
            `/api/household/${householdId}/allergy/${allergyId}`,
            {headers: headers}
        )

        const status = response.status()
        expect(status, 'Unexpected status').toBe(expectedStatus)

        return await response.json()
    }

    static readonly cleanupAllergies = async (
        context: BrowserContext,
        householdId: number,
        allergyIds: number[]
    ): Promise<void> => {
        for (const id of allergyIds) {
            try {
                await this.deleteAllergy(context, householdId, id)
            } catch (error) {
                console.warn(`Failed to cleanup allergy ${id}:`, error)
            }
        }
    }
}
```

**Key Points:**
- Follow existing factory pattern from `householdFactory.ts`
- Use `salt()` for unique test data
- Include cleanup methods for afterAll hooks
- Assert expected status codes

---

## Phase 7: E2E Tests

### File: `tests/e2e/ui/AdminAllergies.e2e.spec.ts`

```typescript
import {test, expect} from '@playwright/test'
import testHelpers from '../testHelpers'
import {AllergyTypeFactory} from '../testDataFactories/allergyTypeFactory'
import {HouseholdFactory} from '../testDataFactories/householdFactory'
import {AllergyFactory} from '../testDataFactories/allergyFactory'

const {validatedBrowserContext} = testHelpers

let createdAllergyTypeIds: number[] = []

test.afterAll(async ({browser}) => {
    const context = await validatedBrowserContext(browser)
    await AllergyTypeFactory.cleanupAllergyTypes(context, createdAllergyTypeIds)
})

test.describe('AdminAllergies - AllergyType CRUD', () => {

    test('GIVEN admin user WHEN loading page THEN shows allergy types list', async ({page, browser}) => {
        const context = await validatedBrowserContext(browser)

        // GIVEN: Create test allergy type
        const allergyType = await AllergyTypeFactory.createAllergyType(context, {
            name: 'Gluten Test',
            description: 'Gluten intolerance',
            icon: 'ðŸŒ¾'
        })
        createdAllergyTypeIds.push(allergyType.id)

        // WHEN: Load admin allergies page
        await page.goto('/admin/allergies')

        // THEN: Shows allergy type in list
        const card = page.locator(`[data-testid="allergy-type-${allergyType.id}"]`)
        await expect(card).toBeVisible()
        await expect(card.locator('h3')).toContainText('Gluten Test')
        await expect(card).toContainText('ðŸŒ¾')
    })

    test('GIVEN admin user WHEN creating allergy type THEN creates successfully', async ({page, browser}) => {
        // WHEN: Navigate and create
        await page.goto('/admin/allergies')
        await page.locator('button[name="create-allergy-type"]').click()

        await page.locator('input[name="allergy-type-name"]').fill('Lactose Test')
        await page.locator('textarea[name="allergy-type-description"]').fill('Lactose intolerance')
        await page.locator('input[name="allergy-type-icon"]').fill('ðŸ¥›')

        await page.locator('button[name="save-allergy-type"]').click()

        // THEN: Verify via API
        const context = await validatedBrowserContext(browser)
        const response = await context.request.get('/api/admin/allergy-type')
        const allergyTypes = await response.json()
        const created = allergyTypes.find((at: any) => at.name === 'Lactose Test')

        expect(created).toBeDefined()
        expect(created.icon).toBe('ðŸ¥›')
        createdAllergyTypeIds.push(created.id)
    })

    test('GIVEN allergy type with inhabitants WHEN viewing THEN shows inhabitants', async ({page, browser}) => {
        const context = await validatedBrowserContext(browser)

        // GIVEN: Create household with inhabitant and allergy
        const {household, inhabitants} = await HouseholdFactory.createHouseholdWithInhabitants(context, 'Test House', 1)
        const allergyType = await AllergyTypeFactory.createAllergyType(context, {name: 'Peanut'})
        await AllergyFactory.createAllergy(context, household.id, {
            inhabitantId: inhabitants[0].id,
            allergyTypeId: allergyType.id,
            inhabitantComment: 'Severe'
        })

        createdAllergyTypeIds.push(allergyType.id)

        // WHEN: Load page
        await page.goto('/admin/allergies')

        // THEN: Shows inhabitant in allergy type card
        const card = page.locator(`[data-testid="allergy-type-${allergyType.id}"]`)
        await expect(card).toContainText(inhabitants[0].name)

        // Cleanup
        await HouseholdFactory.deleteHousehold(context, household.id)
    })

    test('GIVEN allergy type WHEN deleting with confirmation THEN CASCADE deletes', async ({page, browser}) => {
        const context = await validatedBrowserContext(browser)

        // GIVEN: Create allergy type
        const allergyType = await AllergyTypeFactory.createAllergyType(context, {name: 'Shellfish'})
        createdAllergyTypeIds.push(allergyType.id)

        // WHEN: Delete with confirmation
        await page.goto('/admin/allergies')

        page.once('dialog', dialog => dialog.accept())
        await page.locator(`button[name="delete-allergy-type-${allergyType.id}"]`).click()

        // THEN: Verify deleted via API
        const response = await context.request.get(`/api/admin/allergy-type/${allergyType.id}`)
        expect(response.status()).toBe(404)

        // Remove from cleanup list
        createdAllergyTypeIds = createdAllergyTypeIds.filter(id => id !== allergyType.id)
    })
})
```

### File: `tests/e2e/ui/HouseholdAllergies.e2e.spec.ts`

```typescript
import {test, expect} from '@playwright/test'
import testHelpers from '../testHelpers'
import {HouseholdFactory} from '../testDataFactories/householdFactory'
import {AllergyTypeFactory} from '../testDataFactories/allergyTypeFactory'
import {AllergyFactory} from '../testDataFactories/allergyFactory'

const {validatedBrowserContext} = testHelpers

let createdHouseholdId: number | null = null
let createdAllergyTypeIds: number[] = []

test.afterAll(async ({browser}) => {
    const context = await validatedBrowserContext(browser)
    if (createdHouseholdId) await HouseholdFactory.deleteHousehold(context, createdHouseholdId)
    await AllergyTypeFactory.cleanupAllergyTypes(context, createdAllergyTypeIds)
})

test.describe('HouseholdAllergies - User allergy management', () => {

    test('GIVEN household members WHEN adding allergy THEN creates successfully', async ({page, browser}) => {
        const context = await validatedBrowserContext(browser)

        // GIVEN: Create household and allergy type
        const {household, inhabitants} = await HouseholdFactory.createHouseholdWithInhabitants(context, 'Test House', 2)
        createdHouseholdId = household.id

        const allergyType = await AllergyTypeFactory.createAllergyType(context, {name: 'Eggs', icon: 'ðŸ¥š'})
        createdAllergyTypeIds.push(allergyType.id)

        // WHEN: Navigate to household allergies tab
        await page.goto(`/household/${household.shortName}/allergies`)

        // Add allergy
        await page.locator('button[name="add-allergy"]').click()
        await page.locator('select[name="select-inhabitant"]').selectOption({value: String(inhabitants[0].id)})
        await page.locator('select[name="select-allergy-type"]').selectOption({value: String(allergyType.id)})
        await page.locator('textarea[name="allergy-comment"]').fill('Severe reaction')
        await page.locator('button[name="save-add-allergy"]').click()

        // THEN: Verify via API
        const response = await context.request.get(`/api/household/${household.id}/allergy`)
        const inhabitantsWithAllergies = await response.json()
        const inhabitant = inhabitantsWithAllergies.find((i: any) => i.id === inhabitants[0].id)

        expect(inhabitant.allergies).toHaveLength(1)
        expect(inhabitant.allergies[0].allergyType.name).toBe('Eggs')
        expect(inhabitant.allergies[0].inhabitantComment).toBe('Severe reaction')
    })

    test('GIVEN inhabitant with allergy WHEN editing comment THEN updates successfully', async ({page, browser}) => {
        const context = await validatedBrowserContext(browser)

        // GIVEN: Create allergy
        const {household, inhabitants} = await HouseholdFactory.createHouseholdWithInhabitants(context, 'Test House', 1)
        const allergyType = await AllergyTypeFactory.createAllergyType(context, {name: 'Soy'})
        const allergy = await AllergyFactory.createAllergy(context, household.id, {
            inhabitantId: inhabitants[0].id,
            allergyTypeId: allergyType.id,
            inhabitantComment: 'Mild'
        })

        createdHouseholdId = household.id
        createdAllergyTypeIds.push(allergyType.id)

        // WHEN: Edit comment
        await page.goto(`/household/${household.shortName}/allergies`)
        await page.locator(`button[name="edit-comment-${allergy.id}"]`).click()
        await page.locator('textarea[name="edit-comment"]').fill('Severe - avoid completely')
        await page.locator('button[name="save-comment"]').click()

        // THEN: Verify via API
        const response = await context.request.get(`/api/household/${household.id}/allergy`)
        const inhabitantsWithAllergies = await response.json()
        const updatedAllergy = inhabitantsWithAllergies[0].allergies.find((a: any) => a.id === allergy.id)

        expect(updatedAllergy.inhabitantComment).toBe('Severe - avoid completely')
    })
})
```

**Key Points:**
- Follow GIVEN/WHEN/THEN structure (ADR-003)
- Setup via API (fast), interact via UI, verify via API
- Use factories for all test data creation
- Cleanup in afterAll hooks
- Test both admin and user flows

---

## Implementation Order

1. **Phase 1**: Composables (validation foundation)
2. **Phase 2**: Repository functions (data layer)
3. **Phase 3**: API routes (backend endpoints)
4. **Phase 4**: Stores (state management)
5. **Phase 5a**: AdminAllergies.vue (admin UI)
6. **Phase 5b**: HouseholdAllergies.vue (user UI)
7. **Phase 6**: Test factories
8. **Phase 7**: E2E tests

**Dependencies:**
- Phases 1-3 must be sequential (each depends on previous)
- Phase 4 requires Phase 3 (stores call API)
- Phase 5 requires Phase 4 (components use stores)
- Phases 6-7 can start once Phase 3 is complete (factories test API directly)

**Recommended approach:**
- Start with backend (Phases 1-3) - verify with Postman/curl
- Add stores (Phase 4) - test with browser console
- Build UI (Phase 5) - manual testing
- Add E2E tests (Phases 6-7) - automated verification

---

## Authorization TODO

The household allergy routes include TODO comments for authorization. Implement these checks:

```typescript
// In GET/PUT/PATCH/DELETE routes under /api/household/[householdId]/allergy/*

const session = await requireUserSession(event)

// Check if user is admin OR inhabitant belongs to their household
if (session.user.systemRole !== 'ADMIN') {
    // For GET: verify householdId matches user's household
    if (session.user.Inhabitant?.householdId !== householdId) {
        throw createError({statusCode: 403, message: 'Forbidden'})
    }

    // For PUT/PATCH/DELETE: additionally verify inhabitantId belongs to this household
    // Requires fetching inhabitant from DB first
}
```

Consider creating a helper function:
```typescript
// server/utils/authHelpers.ts
export async function verifyHouseholdAccess(
    event: H3Event,
    householdId: number
): Promise<void> {
    const session = await requireUserSession(event)
    if (session.user.systemRole === 'ADMIN') return

    if (session.user.Inhabitant?.householdId !== householdId) {
        throw createError({statusCode: 403, message: 'Forbidden'})
    }
}
```

---

## Summary

This workplan provides a complete implementation blueprint for allergy management following all existing ADRs and patterns. Each phase includes concrete code structures, file paths, and key implementation details. The approach ensures:

- **CASCADE delete**: Schema handles deletion correctly
- **Admin view**: Shows inhabitants per allergy type (lightweight)
- **User view**: Grouped by inhabitant with full allergy details
- **Icons**: String field (emoji or class name)
- **Authorization**: Household-scoped access (TODO to complete)
- **Testing**: Full E2E coverage with factories
- **ADR compliance**: All patterns followed consistently
